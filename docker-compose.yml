version: '3.9'

services:
  web:
    build: .
    container_name: career_guidance_ai
    ports:
      - "5000:5000"

    # Inject all keys from .env at runtime (file is NOT baked into the image)
    env_file:
      - .env

    # Persist uploaded files across container restarts
    volumes:
      - ./uploads:/app/uploads
      - ./Career_Guidance_SubProject/uploads:/app/Career_Guidance_SubProject/uploads

    # Auto-restart if the container crashes
    restart: unless-stopped
