{% extends 'base.html' %}
{% block title %}Career Interest Quiz - Career Guidance AI{% endblock %}
{% block content %}
<div class="page-wrapper">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="stat-card">
                <div class="text-center mb-4">
                    <div class="stat-icon mx-auto mb-3" style="background: var(--accent); width:56px; height:56px; font-size:1.5rem;">
                        <i class="bi bi-question-circle"></i>
                    </div>
                    <h3 class="fw-bold" style="color: var(--dark);">Career Interest Quiz</h3>
                    <p style="color: var(--gray);">
                        <i class="bi bi-file-earmark-person me-1" style="color: var(--primary);"></i>
                        These questions are personalised based on <strong>your resume</strong> &mdash; skills, projects &amp; education.
                    </p>
                </div>

                <form method="POST">
                    {% if questions %}
                        {% for q in questions %}
                        {% set qnum = loop.index %}
                        <div class="p-3 mb-3 rounded-3"
                             style="background: {% if loop.index is odd %}rgba(67,97,238,0.04){% else %}rgba(114,9,183,0.04){% endif %};">
                            <label class="form-label fw-bold" style="color: var(--dark);">
                                <span class="badge me-2" style="background: var(--primary);">Q{{ qnum }}</span>{{ q.q }}
                            </label>
                            <div class="d-flex flex-wrap gap-2 mt-2">
                                {% for opt, val in q.a %}
                                <div class="form-check">
                                    <input class="form-check-input" type="radio"
                                           name="q{{ qnum }}"
                                           id="q{{ qnum }}_{{ loop.index }}"
                                           value="{{ val }}" required
                                           {% if previous_answers and previous_answers.get('q' ~ qnum) == val %}checked{% endif %}>
                                    <label class="form-check-label" for="q{{ qnum }}_{{ loop.index }}">{{ opt }}</label>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <div class="alert alert-warning">No quiz questions could be generated. Please go back and re-select your resume.</div>
                    {% endif %}

                    <button type="submit" class="btn btn-career btn-lg w-100 mt-2">
                        <i class="bi bi-send me-2"></i>Submit Quiz &amp; View Recommendations
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
