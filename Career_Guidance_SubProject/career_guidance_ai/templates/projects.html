{% extends 'base.html' %}
{% block title %}My Projects - Career Guidance AI{% endblock %}
{% block content %}
<div class="page-wrapper">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h4 class="section-title mb-0"><i class="bi bi-kanban me-2"></i>My Project Portfolio</h4>
        <button class="btn btn-career btn-sm" data-bs-toggle="modal" data-bs-target="#addProjectModal">
            <i class="bi bi-plus-circle me-1"></i>Add Project
        </button>
    </div>

    {% if projects %}
    <div class="row g-3">
        {% for project in projects %}
        <div class="col-md-6 col-lg-4">
            <div class="stat-card">
                <h5 class="fw-bold mb-2" style="color: var(--dark);">{{ project.title }}</h5>
                <p style="color: var(--gray); font-size: 0.88rem;">{{ project.description }}</p>
                {% if project.skills %}
                <div class="mb-2">
                    <small class="text-muted">Skills:</small>
                    <span class="fw-medium" style="font-size: 0.85rem;">{{ project.skills }}</span>
                </div>
                {% endif %}
                {% if project.link %}
                <div class="mb-2">
                    <a href="{{ project.link }}" target="_blank" style="color: var(--primary); font-size: 0.85rem;"><i class="bi bi-link-45deg me-1"></i>{{ project.link }}</a>
                </div>
                {% endif %}
                <small class="text-muted d-block mb-3">Added: {{ project.created_at.strftime('%Y-%m-%d') }}</small>

                <form method="POST" action="/edit_project/{{ project.id }}" class="mb-2">
                    <input type="text" name="title" class="form-control form-control-sm mb-1" value="{{ project.title }}" required>
                    <textarea name="description" class="form-control form-control-sm mb-1" rows="2">{{ project.description }}</textarea>
                    <input type="text" name="skills" class="form-control form-control-sm mb-1" value="{{ project.skills }}" placeholder="Skills">
                    <input type="text" name="link" class="form-control form-control-sm mb-2" value="{{ project.link }}" placeholder="Project link">
                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-career btn-sm flex-grow-1">Save</button>
                </form>
                <form method="POST" action="/delete_project/{{ project.id }}" onsubmit="return confirm('Delete this project?');" class="flex-grow-1">
                    <button type="submit" class="btn btn-sm w-100" style="background: var(--danger); color: #fff; border-radius: 10px; font-weight: 600;">Delete</button>
                </form>
                    </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <i class="bi bi-kanban d-block"></i>
        <h5>No projects added yet</h5>
        <p>Start building your portfolio by adding projects</p>
    </div>
    {% endif %}

    <!-- Add Project Modal -->
    <div class="modal fade" id="addProjectModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content" style="border-radius: 14px; border: none;">
                <form method="POST" action="/add_project">
                    <div class="modal-header" style="background: linear-gradient(135deg, var(--primary), var(--secondary)); border-radius: 14px 14px 0 0;">
                        <h5 class="modal-title text-white fw-bold">Add New Project</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label class="form-label fw-bold">Title</label>
                            <input type="text" class="form-control" name="title" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">Description</label>
                            <textarea class="form-control" name="description" rows="2"></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">Skills (comma separated)</label>
                            <input type="text" class="form-control" name="skills">
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">Project Link</label>
                            <input type="text" class="form-control" name="link">
                        </div>
                    </div>
                    <div class="modal-footer border-0">
                        <button type="button" class="btn btn-career-outline" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-career">Add Project</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
