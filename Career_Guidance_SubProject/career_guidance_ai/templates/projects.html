{% extends 'base.html' %}
{% block title %}My Projects | Career Guidance AI{% endblock %}
{% block content %}
<div class="container py-4">
  <h2 class="mb-4 text-primary text-center">My Project Portfolio</h2>
  <div class="text-end mb-3">
    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addProjectModal"><i class="bi bi-plus-circle me-1"></i>Add Project</button>
  </div>
  {% if projects %}
  <div class="row g-4">
    {% for project in projects %}
    <div class="col-md-6 col-lg-4">
      <div class="card shadow-sm h-100">
        <div class="card-body">
          <h5 class="card-title text-info">{{ project.title }}</h5>
          <p class="card-text">{{ project.description }}</p>
          {% if project.skills %}
          <div class="mb-2"><b>Skills:</b> <span class="text-dark">{{ project.skills }}</span></div>
          {% endif %}
          {% if project.link %}
          <div class="mb-2"><b>Link:</b> <a href="{{ project.link }}" target="_blank">{{ project.link }}</a></div>
          {% endif %}
          <div class="mb-2 text-muted" style="font-size:0.9em;">Added: {{ project.created_at.strftime('%Y-%m-%d') }}</div>
          <form method="POST" action="/edit_project/{{ project.id }}" class="mb-2">
            <input type="text" name="title" class="form-control form-control-sm mb-1" value="{{ project.title }}" required>
            <textarea name="description" class="form-control form-control-sm mb-1" rows="2">{{ project.description }}</textarea>
            <input type="text" name="skills" class="form-control form-control-sm mb-1" value="{{ project.skills }}" placeholder="Skills (comma separated)">
            <input type="text" name="link" class="form-control form-control-sm mb-1" value="{{ project.link }}" placeholder="Project link">
            <button type="submit" class="btn btn-primary btn-sm">Save</button>
          </form>
          <form method="POST" action="/delete_project/{{ project.id }}" onsubmit="return confirm('Delete this project?');">
            <button type="submit" class="btn btn-danger btn-sm">Delete</button>
          </form>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="alert alert-info text-center">No projects added yet. Start by adding your first project!</div>
  {% endif %}

  <!-- Add Project Modal -->
  <div class="modal fade" id="addProjectModal" tabindex="-1" aria-labelledby="addProjectModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <form method="POST" action="/add_project">
          <div class="modal-header">
            <h5 class="modal-title" id="addProjectModalLabel">Add New Project</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label for="title" class="form-label">Title</label>
              <input type="text" class="form-control" id="title" name="title" required>
            </div>
            <div class="mb-3">
              <label for="description" class="form-label">Description</label>
              <textarea class="form-control" id="description" name="description" rows="2"></textarea>
            </div>
            <div class="mb-3">
              <label for="skills" class="form-label">Skills (comma separated)</label>
              <input type="text" class="form-control" id="skills" name="skills">
            </div>
            <div class="mb-3">
              <label for="link" class="form-label">Project Link</label>
              <input type="text" class="form-control" id="link" name="link">
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-success">Add Project</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %} 